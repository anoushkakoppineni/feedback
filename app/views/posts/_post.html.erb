<div class="post_div">
  <div class="post_title">
    <%= link_to post.title.capitalize, post_path(id: post.id) %>
  </div>
  <div class="post_content">
    <%= post.content %>
    <% if signed_in? && (current_user.usertype || current_user?(User.find(post.user_id)))%>
      <br>
    <%= link_to "Delete", post, method: :delete, data: { confirm: "Are you sure?"} %>
  <% end %>
  </div>
  <span>Tags:<% @tags = Post.includes(:tags).find(post.id).tags %>
  <% @tags.each do |tag| %>
      <%= link_to tag.name.capitalize, tag, class:"tag_link" %>
  <% end %>
  </span>
  <br>
  <span>
    <span class="glyphicon glyphicon-user"></span> <%= User.find(post.user_id).fullname.capitalize %> | <span class="glyphicon glyphicon-time"></span> <%= post.created_at %>
</span>
  <br>
  <span class="expand_comment">view comments</span>
  <br>
  <div class="comment_container">
    <ul>
      <% @comments = Comment.where("post_id = ?", post.id) %>
      <% @comments.each do |comment| %>
        <%= render comment %>
    <% end %>
    </ul>

    <% if signed_in? %>
      <%= form_for(:comment, url: comments_path, method: 'post' , :html => { :class => "form-horizontal"}) do |f|  %>
      <%= f.text_area :content, size: "60x3", class:"form-control", placeholder:"Add a comment" %>
    <%= hidden_field_tag(:post_id, "#{post.id}")%>
    <%= f.submit "Comment", class:"btn btn-primary" %>
  <% end %>

  <% end %>
  </div>
</div>
